{"version":3,"file":"js/354.0b2b7b1a.js","mappings":"wLAAAA,IAAA,G,GAAAA,IAAA,G,EAAA,a,GAAAA,IAAA,EAoBSC,MAAM,e,0CAnBbC,EAAAA,EAAAA,IAsBO,QAtBDD,MAAM,OAAQE,SAAMC,EAAA,KAAAA,EAAA,IAD5BC,EAAAA,EAAAA,KAAA,kBACsCC,EAAAH,UAAAG,EAAAH,SAAAI,MAAAD,EAAAE,UAAQ,kB,cAC1CC,EAAAA,EAAAA,IAAwB,UAApB,mBAAe,KAEnBA,EAAAA,EAAAA,IAIM,OAJAR,OAJVS,EAAAA,EAAAA,IAAA,iBAAAC,QAI6CL,EAAAM,e,cACvCH,EAAAA,EAAAA,IAAgC,SAAzBI,IAAI,SAAQ,SAAK,cACxBJ,EAAAA,EAAAA,IAAiE,SAA1DK,KAAK,QAAQC,GAAG,QAN7B,sBAAAX,EAAA,KAAAA,EAAA,YAAAY,GAAA,OAM8CV,EAAAW,MAAKD,CAAA,GAAGE,OAAId,EAAA,KAAAA,EAAA,qBAAEE,EAAAa,WAAAb,EAAAa,UAAAZ,MAAAD,EAAAE,UAAS,I,iBAAvBF,EAAAW,SAC3BX,EAAAM,aAAU,WAAvBV,EAAAA,EAAAA,IAAiD,QAPvDkB,GAAAC,EAAAA,EAAAA,IAOkCf,EAAAM,YAAU,KAP5CU,EAAAA,EAAAA,IAAA,YAUIb,EAAAA,EAAAA,IAIM,OAJAR,OAVVS,EAAAA,EAAAA,IAAA,iBAAAC,QAU6CL,EAAAiB,kB,cACvCd,EAAAA,EAAAA,IAAsC,SAA/BI,IAAI,YAAW,YAAQ,cAC9BJ,EAAAA,EAAAA,IAA6E,SAAtEK,KAAK,WAAWC,GAAG,WAZhC,sBAAAX,EAAA,KAAAA,EAAA,YAAAY,GAAA,OAYoDV,EAAAkB,SAAQR,CAAA,GAAGE,OAAId,EAAA,KAAAA,EAAA,qBAAEE,EAAAmB,cAAAnB,EAAAmB,aAAAlB,MAAAD,EAAAE,UAAY,I,iBAA7BF,EAAAkB,YACjClB,EAAAiB,gBAAa,WAA1BrB,EAAAA,EAAAA,IAAuD,QAb7DwB,GAAAL,EAAAA,EAAAA,IAaqCf,EAAAiB,eAAa,KAblDD,EAAAA,EAAAA,IAAA,YAgBIb,EAAAA,EAAAA,IAES,UAFDR,MAAM,cAAca,KAAK,SAAUa,SAAUrB,EAAAsB,cAAgBtB,EAAAuB,mBAAmB,UAExF,EAlBJC,GAoBmCxB,EAAAuB,oBAAiB,WAAhD3B,EAAAA,EAAAA,IAEM,MAFN6B,EAAkD,oEApBtDT,EAAAA,EAAAA,IAAA,W,mGCMO,SAASU,IACd,IAAAC,GAAoDC,EAAAA,EAAAA,MAA5CC,EAAYF,EAAZE,aAAcP,EAAYK,EAAZL,aAAcQ,EAAWH,EAAXG,YAC9BC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAEfC,GAIIC,EAAAA,EAAAA,IACF,QACAC,EAAAA,KAEGC,OACAC,SAAS,4BACT5B,MAAM,uCATFA,EAAKwB,EAAZK,MACclC,EAAU6B,EAAxBM,aACY5B,EAASsB,EAArBO,WAUIC,EAAa,EAEnBC,GAIIR,EAAAA,EAAAA,IACF,WACAC,EAAAA,KAEGC,OACAC,SAAS,6BACTM,IAAIF,EAAY,+BAAFG,OAAiCH,EAAU,eATrDzB,EAAQ0B,EAAfJ,MACcvB,EAAa2B,EAA3BH,aACYtB,EAAYyB,EAAxBF,WAUInB,GAAoBwB,EAAAA,EAAAA,KAAS,kBAAMjB,EAAYU,OAAS,CAAC,KAE/DQ,EAAAA,EAAAA,IAAMzB,GAAmB,SAAC0B,GACpBA,GACFC,YAAW,kBAAOpB,EAAYU,MAAQ,CAAC,GAAG,KAE9C,IAEA,IAAM3C,EAAWgC,EAAY,eAAAsB,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAC,EAAOC,GAAM,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEjC7B,EAAM8B,SAAS,aAAcL,GAAO,OAC1CvB,EAAO6B,KAAK,KAAKJ,EAAAE,KAAA,eAAAF,EAAAC,KAAA,EAAAD,EAAAK,GAAAL,EAAA,oCAAAA,EAAAM,OAAA,GAAAT,EAAA,kBAEpB,gBAAAU,GAAA,OAAAd,EAAAlD,MAAA,KAAAC,UAAA,EAL4B,IAO7B,MAAO,CACLS,MAAAA,EACAL,WAAAA,EACAO,UAAAA,EACAK,SAAAA,EACAD,cAAAA,EACAE,aAAAA,EACAtB,SAAAA,EACAyB,aAAAA,EACAC,kBAAAA,EAEJ,C,cDjCA,SACE2C,MAAK,WACH,IAAMC,GAAQC,EAAAA,EAAAA,MACRrC,GAAQC,EAAAA,EAAAA,MASd,OAPImC,EAAME,MAAMC,SACdvC,EAAM8B,SAAS,aAAc,CAC3BrB,OAAO+B,EAAAA,EAAAA,GAAMJ,EAAME,MAAMC,SACzB9D,KAAM,aAIVgE,EAAAA,EAAAA,GAAA,GAAW9C,IACb,G,cExCF,MAAM+C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,G","sources":["webpack://vue-practice-app/./src/views/Auth.vue","webpack://vue-practice-app/./src/use/login-form.js","webpack://vue-practice-app/./src/views/Auth.vue?30a9"],"sourcesContent":["<template>\n  <form class=\"card\" @submit.prevent=\"onSubmit\">\n    <h1>Войти в систему</h1>\n\n    <div :class=\"['form-control', { invalid: emailError }]\">\n      <label for=\"email\">Email</label>\n      <input type=\"email\" id=\"email\" v-model=\"email\" @blur=\"emailBlur\">\n      <small v-if=\"emailError\">{{ emailError }}</small>\n    </div>\n\n    <div :class=\"['form-control', { invalid: passwordError }]\">\n      <label for=\"password\">Password</label>\n      <input type=\"password\" id=\"password\" v-model=\"password\" @blur=\"passwordBlur\">\n      <small v-if=\"passwordError\">{{ passwordError }}</small>\n    </div>\n\n    <button class=\"btn primary\" type=\"submit\" :disabled=\"isSubmitting || isTooManyAttempts\">\n      Войти\n    </button>\n\n    <div class=\"text-danger\" v-if=\"isTooManyAttempts\">\n      Вы слишком часто пытаетесь войти в систему. Попробуйте позже\n    </div>\n  </form>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router';\nimport { useLoginForm } from '../use/login-form';\nimport { useStore } from 'vuex';\nimport { error } from '../utils/error';\n\nexport default {\n  setup() {\n    const route = useRoute()\n    const store = useStore()\n\n    if (route.query.message) {\n      store.dispatch('setMessage', {\n        value: error(route.query.message),\n        type: 'warning'\n      })\n    }\n\n    return {...useLoginForm()}\n  }\n}\n</script>\n\n<style>\n\n</style>","import { computed, watch } from \"vue\";\nimport * as yup from \"yup\";\nimport { useField, useForm } from \"vee-validate\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\n\nexport function useLoginForm() {\n  const { handleSubmit, isSubmitting, submitCount } = useForm();\n  const store = useStore();\n  const router = useRouter();\n\n  const {\n    value: email,\n    errorMessage: emailError,\n    handleBlur: emailBlur,\n  } = useField(\n    \"email\",\n    yup\n      .string()\n      .trim()\n      .required(\"Пожалуйста введите email\")\n      .email(\"Необходимо ввести корректный email\")\n  );\n\n  const MIN_LENGTH = 6;\n\n  const {\n    value: password,\n    errorMessage: passwordError,\n    handleBlur: passwordBlur,\n  } = useField(\n    \"password\",\n    yup\n      .string()\n      .trim()\n      .required(\"Пожалуйста введите пароль\")\n      .min(MIN_LENGTH, `Пароль не может быть меньше ${MIN_LENGTH} символов`)\n  );\n\n  const isTooManyAttempts = computed(() => submitCount.value >= 3);\n\n  watch(isTooManyAttempts, (val) => {\n    if (val) {\n      setTimeout(() => (submitCount.value = 0), 1500);\n    }\n  });\n\n  const onSubmit = handleSubmit(async (values) => {\n    try {\n      await store.dispatch(\"auth/login\", values);\n      router.push(\"/\");\n    } catch (e) {}\n  });\n\n  return {\n    email,\n    emailError,\n    emailBlur,\n    password,\n    passwordError,\n    passwordBlur,\n    onSubmit,\n    isSubmitting,\n    isTooManyAttempts,\n  };\n}\n","import { render } from \"./Auth.vue?vue&type=template&id=5a4e2448\"\nimport script from \"./Auth.vue?vue&type=script&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","_createElementBlock","onSubmit","_cache","_withModifiers","_ctx","apply","arguments","_createElementVNode","_normalizeClass","invalid","emailError","for","type","id","$event","email","onBlur","emailBlur","_hoisted_1","_toDisplayString","_createCommentVNode","passwordError","password","passwordBlur","_hoisted_2","disabled","isSubmitting","isTooManyAttempts","_hoisted_3","_hoisted_4","useLoginForm","_useForm","useForm","handleSubmit","submitCount","store","useStore","router","useRouter","_useField","useField","yup","trim","required","value","errorMessage","handleBlur","MIN_LENGTH","_useField2","min","concat","computed","watch","val","setTimeout","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","wrap","_context","prev","next","dispatch","push","t0","stop","_x","setup","route","useRoute","query","message","error","_objectSpread","__exports__","render"],"sourceRoot":""}